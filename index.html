<title>Escape The Loop â€“ Ultimate Edition
body {
margin: 0;
background: linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e);
color: white;
text-align: center;
font-family: 'Courier New', monospace;
overflow: hidden;
}
canvas {
background: linear-gradient(45deg, #111, #222, #333);
display: block;
margin: 10px auto;
border: 5px solid #00ff88;
box-shadow: 0 0 40px rgba(0, 255, 136, 0.6),
inset 0 0 20px rgba(255, 0, 255, 0.2);
border-radius: 15px;
max-width: 90vw;
max-height: 85vh;
}
.title {
font-size: 32px;
color: #00ff88;
text-shadow: 0 0 25px rgba(0, 255, 136, 1),
0 0 50px rgba(255, 0, 255, 0.5);
margin: 10px 0;
font-weight: bold;
}
.instructions {
font-size: 18px;
color: #ffaa00;
margin: 5px 0;
text-shadow: 0 0 10px rgba(255, 170, 0, 0.8);
}
</style>
âœ¨ ESCAPE THE LOOP âœ¨
ðŸ”‘ Use ARROW KEYS to move â€¢ Collect 3 KEYS to activate portal â€¢ Avoid enemies ðŸ”´
// --- CONSTANTS & GLOBALS ---
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const tileSize = 45;
const mazeOffsetX = 40;
const mazeOffsetY = 80;
const MOVE_COOLDOWN = 8;
let gameStarted = false,
gameOver = false,
victory = false,
currentLevel = 0,
score = 0,
keysCollected = 0,
messageTimer = 0,
levelMessage = "",
transitioning = false,
transitionProgress = 0,
animationTime = 0,
moveDelay = 0;
// --- PLAYER STATE ---
let player = {
x: 1, y: 1,
targetX: 1, targetY: 1,
floatX: 1, floatY: 1,
angle: 0, scale: 1,
moving: false,
trail: []
};
// --- INPUT HANDLING ---
let keysPressed = {};
document.addEventListener("keydown", e => {
if (!gameStarted && e.key === "Enter") {
gameStarted = true;
resetLevel();
return;
}
if (e.key === "r" || e.key === "R") {
restartGame();
return;
}
if (!keysPressed[e.key] && moveDelay <= 0) {
keysPressed[e.key] = true;
handleMovement(e.key);
}
});
document.addEventListener("keyup", e => {
delete keysPressed[e.key];
});
// --- DIRECTION VECTORS ---
const ENEMY_DIRS = [
{ x: 0, y: -1 }, { x: 1, y: 0 }, { x: 0, y: 1 }, { x: -1, y: 0 }
];
// --- LEVEL DEFINITIONS (1â€“10) ---
let levels = [
// Level 1
{
maze: [
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
[1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
[1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1],
[1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1],
[1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1],
[1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1],
[1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1],
[1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1],
[1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1],
[1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1],
[1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1],
[1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
[1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1],
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
],
enemies: [
{ x: 5, y: 5, floatX: 5, floatY: 5, speed: 0.015, direction: 0, moveTimer: 0, color: '#ff4444' },
{ x: 10, y: 9, floatX: 10, floatY: 9, speed: 0.012, direction: 1, moveTimer: 0, color: '#ff6666' },
{ x: 3, y: 11, floatX: 3, floatY: 11, speed: 0.018, direction: 2, moveTimer: 0, color: '#ff8888' }
],
keys: [
{ x: 13, y: 1, pulse: 0 },
{ x: 1, y: 13, pulse: 0.5 },
{ x: 13, y: 13, pulse: 1 }
],
diamonds: [
{ x: 8, y: 7, rotation: 0 }
],
portal: { x: 14, y: 13, pulse: 1, active: false, particles: [] }
},
// Level definitions for subsequent levels can be copied here as needed.
// Level 2 to 10 copied as necessary from Level 1
JSON.parse(JSON.stringify(levels[0])),
JSON.parse(JSON.stringify(levels[0])),
JSON.parse(JSON.stringify(levels[0])),
JSON.parse(JSON.stringify(levels[0])),
JSON.parse(JSON.stringify(levels[0])),
];
// Function definitions for resetLevel, restartGame, and handleMovement will be required after.
function resetLevel() {
// Code to reset the current level
}
function restartGame() {
// Code to restart the game
}
function handleMovement(key) {
// Code to handle player movement based on key pressed
}
</script>